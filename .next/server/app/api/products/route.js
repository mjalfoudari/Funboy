"use strict";(()=>{var e={};e.id=684,e.ids=[684],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2392:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>A,originalPathname:()=>y,patchFetch:()=>f,requestAsyncStorage:()=>l,routeModule:()=>p,serverHooks:()=>m,staticGenerationAsyncStorage:()=>g,staticGenerationBailout:()=>h});var o={};t.r(o),t.d(o,{GET:()=>d,dynamic:()=>u});var a=t(5419),s=t(9108),i=t(9678),c=t(8070),n=t(9631);let u="force-dynamic";async function d(e){try{let r=e.nextUrl.searchParams,t=r.get("featured"),o=r.get("category"),a=r.get("limit");console.log(`API products request - featured: ${t}, category: ${o}, limit: ${a}`);let s=(await n.Z.product.findMany({where:{isActive:!0,..."true"===t&&{isFeatured:!0},...o&&{category:{slug:o}}},include:{category:!0,images:{orderBy:{sortOrder:"asc"}},variants:{where:{isActive:!0},orderBy:{id:"asc"}}},orderBy:{createdAt:"desc"},...a&&{take:parseInt(a)}})).map(e=>({...e,price:Number(e.price),comparePrice:e.comparePrice?Number(e.comparePrice):null,images:e.images||[],category:e.category||{id:"",name:"Uncategorized",slug:"uncategorized"}}));return console.log(`API products response: ${s.length} products found`),c.Z.json(s)}catch(e){return console.error("Error fetching products:",e),c.Z.json({error:"Failed to fetch products"},{status:500})}}let p=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/products/route",pathname:"/api/products",filename:"route",bundlePath:"app/api/products/route"},resolvedPagePath:"C:\\Users\\mjalf\\OneDrive\\Documents\\Funboy\\src\\app\\api\\products\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:l,staticGenerationAsyncStorage:g,serverHooks:m,headerHooks:A,staticGenerationBailout:h}=p,y="/api/products/route";function f(){return(0,i.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:g})}},9631:(e,r,t)=>{t.d(r,{Z:()=>a});let o=require("@prisma/client");process.env.DATABASE_URL||(console.warn("DATABASE_URL not found, using default SQLite database path"),process.env.DATABASE_URL="file:./prisma/dev.db");let a=global.prisma||new o.PrismaClient({log:["error"]})}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[638,206],()=>t(2392));module.exports=o})();